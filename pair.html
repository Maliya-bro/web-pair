<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>MALIYA-MD</title>

<style>
:root{
  --text: rgba(255,255,255,.95);
  --muted: rgba(255,255,255,.7);
  --glass: rgba(255,255,255,.10);
  --border: rgba(255,255,255,.22);
  --radius: 22px;
  --shadow: 0 18px 60px rgba(0,0,0,.45);
}

*{margin:0;padding:0;box-sizing:border-box}
html,body{height:100%;font-family:system-ui}

body{
  min-height:100vh;
  background:
    radial-gradient(1200px 600px at 20% 10%, rgba(0,0,0,.35), transparent 60%),
    radial-gradient(900px 600px at 80% 90%, rgba(0,0,0,.35), transparent 60%),
    url("https://raw.githubusercontent.com/Maliya-bro/MALIYA-MD/refs/heads/main/images/web%20pair%20backgroun%20img.png");
  background-size:cover;
  background-position:center;
  color:var(--text);
}

.wrap{
  min-height:100vh;
  display:grid;
  place-items:center;
  padding:20px;
}

.card{
  width:min(520px,100%);
  background:var(--glass);
  border:1px solid var(--border);
  border-radius:var(--radius);
  padding:26px;
  backdrop-filter:blur(16px);
  box-shadow:var(--shadow);
}

.header{text-align:center;margin-bottom:18px}
.brand{font-size:28px;font-weight:800}
.sub{font-size:13px;color:var(--muted)}

.divider{
  height:1px;
  background:rgba(255,255,255,.15);
  margin:18px 0;
}

label{font-size:13px;color:var(--muted)}
.input{
  width:100%;
  padding:14px;
  margin-top:6px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.2);
  background:rgba(0,0,0,.25);
  color:white;
  outline:none;
}
.input:focus{
  border-color:#6cf;
  box-shadow:0 0 0 4px rgba(100,200,255,.2)
}

.btns{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:12px;
  margin-top:16px;
}

.btn{
  padding:14px;
  border-radius:16px;
  border:none;
  font-weight:700;
  color:white;
  cursor:pointer;
  transition:.25s;
  box-shadow:0 10px 30px rgba(0,0,0,.35);
}
.btn:hover{transform:translateY(-3px)}
.btn:active{transform:scale(.97)}

.btn-pair{
  background:linear-gradient(135deg,#5f9cff,#8a5cff);
}
.btn-qr{
  background:linear-gradient(135deg,#2ecc71,#27ae60);
}
.btn-copy{
  background:linear-gradient(135deg,#ff9f43,#ff6b6b);
  margin-top:12px;
}

.result{
  margin-top:16px;
  padding:16px;
  border-radius:14px;
  background:rgba(0,0,0,.30);
  border:1px solid rgba(255,255,255,.18);
  font-size:20px;
  font-weight:800;
  letter-spacing:2px;
  text-align:center;
  font-family:monospace;
  min-height:64px;
}

.footer{
  margin-top:14px;
  text-align:center;
  font-size:12px;
  color:var(--muted);
}

@media(max-width:420px){
  .btns{grid-template-columns:1fr}
}
</style>
</head>

<body>
<div class="wrap">
  <div class="card">

    <div class="header">
      <div class="brand">MALIYA-MD</div>
      <div class="sub">Generate Pair Code or QR Securely</div>
    </div>

    <div class="divider"></div>

    <label>WhatsApp Number</label>
    <input id="number" class="input" placeholder="9470XXXXXXXX" />

    <div class="btns">
      <button class="btn btn-pair" id="btnPair">ðŸ”‘ Generate Pair</button>
      <button class="btn btn-qr" id="btnQR">ðŸ“· Generate QR</button>
    </div>

    <button class="btn btn-copy" id="btnCopy">ðŸ“‹ Copy Result</button>

    <div class="result" id="result">â€”</div>

    <div class="footer">Â© MALIYA-MD â€¢ Premium Web Pair UI</div>

  </div>
</div>

<script>
const numberEl = document.getElementById("number");
const resultEl = document.getElementById("result");

// ðŸ”‘ Generate Pair
document.getElementById("btnPair").onclick = async () => {
  const n = numberEl.value.replace(/\D/g,"");
  if(!n){
    resultEl.textContent = "ERROR";
    return;
  }

  resultEl.textContent = "WAIT...";

  try{
    const res = await fetch(`/pair?number=${n}`);
    const text = await res.text();

    try{
      const data = JSON.parse(text);
      if(data.code){
        resultEl.textContent = data.code; // âœ… ONLY CODE
      }else if(data.message){
        resultEl.textContent = data.message;
      }else{
        resultEl.textContent = text;
      }
    }catch{
      resultEl.textContent = text;
    }
  }catch{
    resultEl.textContent = "ERROR";
  }
};

// ðŸ“· Generate QR
document.getElementById("btnQR").onclick = () => {
  const n = numberEl.value.replace(/\D/g,"");
  if(!n){
    resultEl.textContent = "ERROR";
    return;
  }
  window.open(`/qr?number=${n}`,"_blank");
  resultEl.textContent = "QR OPENED";
};

// ðŸ“‹ Copy Result
document.getElementById("btnCopy").onclick = () => {
  const text = resultEl.textContent.trim();
  if(!text || text === "â€”" || text === "WAIT..."){
    resultEl.textContent = "NOTHING";
    return;
  }
  navigator.clipboard.writeText(text);
  resultEl.textContent = "COPIED âœ”";
};
</script>
</body>
</html>
